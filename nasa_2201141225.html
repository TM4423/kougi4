<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>NASA API</title>
  <link rel="stylesheet" href="./css/style.css">
</head>
<body>
  <div class="search_area">
    <div id="logo"><img src="https://www.nasa.gov/sites/all/themes/custom/nasatwo/images/nasa-logo.svg" class="logo_image"></div>
    <input type="text" id="search_text" value='xxxx-xx-xx'>
      <button id="search_button">検索</button>
    <div id="loading" style="display: none;"><img src="./images/circle.gif" class="loading_icon"></div>
  <div id="result"></div>
  </div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
$("#search_button").on("click", function() {
  $("#loading").css('display', 'block');
    $("#result").html(''); 
    // 検索ボックスの文字を取得する
    // let searchText = $("#search_text").val();
    // みなさんのtoken
    // let token = "16f497b6bbb579315cc92a088a2f82deef014760"
    // searchTextに入ってきた文字列を使ってaxiosのURLを組み立てる
    // その上で、axios.getを使ってAPIにアクセスする
    // axios.get(`https://api.nasa.gov/planetary/apod?api_key=DEMO_KEY&query=${searchText}`, {
    axios.get(`https://api.nasa.gov/planetary/apod?api_key=hxZbcJnjXYEBYf5PeiAclqnWc2BElTmppF5X9avq`)
      // headers: {
        // Authorization: `Bearer ${token}`,
      // }
    // })
    .then(function(response) { 
      $("#loading").css('display', 'none');
      // response.dataでいい感じにサマリにしてくれた配列を返してもらえるようになる
      // console.log(response.data);
      let data = response.data;
      console.log(data);
      let str = "";
      // for(let i = 0; i < data.length; i++) {
        str += `<p>${data.copyright}</p>`
        str += `<p>${data.date}</p>`
        str += `<img src="${data.url}"></img><br>`
        str += `<p>${data.title}</p>`
        str += `<p>${data.explanation}</p>`
        console.log(str);
        debugger
      // }
      $("#result").html(str);
    }).catch(function () {
      console.log('NG');
    });
  });</script>
</body>
</html>